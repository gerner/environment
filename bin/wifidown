#!/bin/bash
set -e

if [ -t 1 ]; then
    SUDO=sudo
elif [ ! -z "$DISPLAY" ]; then
    SUDO=gksudo
else
    echo "not on tty or in X!" 
    return 1
fi

$SUDO ifdown eth0
$SUDO wpa_action wlan0 stop || true
sleep 2
$SUDO killall dhclient || true
$SUDO ifup eth0
sleep 2
ifconfig eth0
